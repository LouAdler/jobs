<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance-based Interview Guide</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        
        .candidate-info {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .candidate-info h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .info-field {
            display: flex;
            flex-direction: column;
        }
        
        .info-field label {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
        }
        
        .info-field input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .info-field input:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .intro-note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 0 5px 5px 0;
        }
        
        .step-container {
            background-color: white;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .step-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .step-header:hover {
            background-color: #e9ecef;
        }
        
        .step-header.active {
            background-color: #3498db;
            color: white;
        }
        
        .step-number {
            background-color: #3498db;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .step-header.active .step-number {
            background-color: white;
            color: #3498db;
        }
        
        .step-title {
            flex-grow: 1;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .chevron {
            transition: transform 0.3s ease;
            font-size: 1.2em;
        }
        
        .chevron.rotate {
            transform: rotate(180deg);
        }
        
        .step-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 20px;
        }
        
        .step-content.show {
            max-height: 2000px;
            padding: 20px;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .questions-section, .tips-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }
        
        .questions-section h3, .tips-section h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .main-question {
            background-color: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #3498db;
            margin-bottom: 15px;
            border-radius: 0 5px 5px 0;
            font-weight: 500;
        }
        
        .follow-up-questions {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .follow-up-questions li {
            margin-bottom: 8px;
        }
        
        .tips-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .tips-list li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 10px;
        }
        
        .tips-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
        }
        
        .special-note {
            background-color: #fff3cd;
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 3px solid #ffc107;
        }
        
        .notes-section {
            background-color: #f0f7ff;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
            border: 1px solid #b3d9ff;
        }
        
        .notes-section h4 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .notes-section textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
        }
        
        .notes-section textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .summary-notes {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 30px;
            border: 2px solid #3498db;
        }
        
        .summary-notes h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .summary-content {
            margin-top: 20px;
        }
        
        .step-notes-summary {
            background-color: #f8f9fa;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        
        .step-notes-summary h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        
        .step-notes-summary p {
            margin: 0;
            white-space: pre-wrap;
        }
        
        .empty-notes {
            color: #999;
            font-style: italic;
        }
        
        .export-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .export-button {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .export-button:hover {
            background-color: #229954;
        }
        
        .export-button.json {
            background-color: #3498db;
        }
        
        .export-button.json:hover {
            background-color: #2980b9;
        }
        
        .export-button.pdf {
            background-color: #e74c3c;
        }
        
        .export-button.pdf:hover {
            background-color: #c0392b;
        }
        
        /* Evidence Basket Styles */
        .evidence-basket {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            width: 300px;
            max-height: 400px;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .evidence-basket.minimized {
            width: 60px;
            height: 60px;
            padding: 0;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .evidence-basket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .evidence-basket-content {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .evidence-item {
            background-color: #f8f9fa;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            position: relative;
            padding-right: 30px;
        }
        
        .evidence-tag {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .evidence-text {
            font-size: 14px;
            margin-top: 5px;
            color: #555;
        }
        
        .remove-evidence {
            position: absolute;
            top: 5px;
            right: 5px;
            cursor: pointer;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .add-evidence-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .add-evidence-btn:hover {
            background-color: #2980b9;
        }
        
        .basket-count {
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            position: absolute;
            top: -5px;
            right: -5px;
        }
        
        .minimize-btn {
            cursor: pointer;
            color: #3498db;
            font-size: 18px;
        }
        
        .basket-icon {
            font-size: 30px;
            text-align: center;
            line-height: 60px;
        }
        
        /* Phase Indicator */
        .phase-indicator {
            background-color: #2c3e50;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .phase-step {
            display: flex;
            align-items: center;
            opacity: 0.5;
        }
        
        .phase-step.active {
            opacity: 1;
        }
        
        .phase-step.completed {
            opacity: 1;
        }
        
        .phase-number {
            background-color: white;
            color: #2c3e50;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .phase-step.completed .phase-number {
            background-color: #27ae60;
            color: white;
        }
        
        /* Complete Interview Button */
        .complete-interview-section {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 30px;
            text-align: center;
        }
        
        .complete-interview-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .complete-interview-btn:hover {
            background-color: #229954;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .complete-interview-btn:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Highlight Mode Styles */
        .highlight-mode-active {
            background-color: #fff9e6 !important;
            border: 2px dashed #f39c12 !important;
            cursor: text;
        }
        
        .highlight-instructions {
            background-color: #f39c12;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            display: none;
        }
        
        .evidence-source {
            font-size: 11px;
            color: #7f8c8d;
            font-style: italic;
            margin-top: 3px;
        }
        
        .step-evidence-count {
            background-color: #3498db;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        /* Auto-suggest styles */
        .auto-suggest {
            position: absolute;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 1001;
            font-size: 12px;
            max-width: 300px;
        }
        
        .suggest-item {
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
        }
        
        .suggest-item:hover {
            background-color: #e3f2fd;
        }
        
        /* Evidence type badges */
        .evidence-type-badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 5px;
        }
        
        .evidence-type-full {
            background-color: #9b59b6;
            color: white;
        }
        
        .evidence-type-highlight {
            background-color: #f39c12;
            color: white;
        }
        
        .evidence-type-selected {
            background-color: #3498db;
            color: white;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 30px;
            cursor: pointer;
            color: #aaa;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        .evidence-summary {
            margin-top: 20px;
        }
        
        .evidence-category {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .evidence-category h4 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        
        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .evidence-basket {
                width: 250px;
                right: 10px;
                bottom: 10px;
            }
            
            .phase-indicator {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>The Performance-based Interview Guide</h1>
        <p>June 2025 ‚Ä¢ ¬©2025 The Adler Group, Inc.</p>
    </div>
    
    <div class="phase-indicator">
        <div class="phase-step active" id="phase-1">
            <div class="phase-number">1</div>
            <div>Interview & Evidence Gathering</div>
        </div>
        <div class="phase-step" id="phase-2">
            <div class="phase-number">2</div>
            <div>Review Evidence</div>
        </div>
        <div class="phase-step" id="phase-3">
            <div class="phase-number">3</div>
            <div>Complete Scorecard</div>
        </div>
    </div>
    
    <div class="candidate-info">
        <h2>Interview Information</h2>
        <div class="info-grid">
            <div class="info-field">
                <label for="candidate-name">Candidate Name</label>
                <input type="text" id="candidate-name" placeholder="Enter candidate name">
            </div>
            <div class="info-field">
                <label for="job-position">Job Position</label>
                <input type="text" id="job-position" placeholder="Enter position title">
            </div>
            <div class="info-field">
                <label for="interviewer-name">Interviewer Name</label>
                <input type="text" id="interviewer-name" placeholder="Enter your name">
            </div>
            <div class="info-field">
                <label for="interview-date">Interview Date</label>
                <input type="date" id="interview-date" value="">
            </div>
        </div>
    </div>
    
    <div class="intro-note">
        <strong>Important Note:</strong> Before interviewing anyone, define 3-4 key performance objectives for the job and 1-2 problems or challenges the person hired will be asked to handle. Some questions below relate to these job-related factors.
    </div>

    <!-- Step 1 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 1</span>
                <span class="step-title">Welcome and Review Job/Motivation</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Opening Questions</h3>
                    <div class="main-question">
                        "Let me give you a short overview of this job. (provide one-minute summary). Given this, can you give me a quick overview of how your background relates to this job?"
                    </div>
                    <div class="main-question">
                        "What are you looking for now in a new job?" (pause)<br>
                        "Why is having ___ and ___ important to you now?"
                    </div>
                    <div class="main-question">
                        "What's your current job hunting status? How long have you been looking?"
                    </div>
                    <div class="special-note">
                        <strong>For subsequent interviewers:</strong> "Based on your other discussions, please give me a quick overview of your thoughts about the job, and what you've discussed with others so far."
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Information & Hot Tips</h3>
                    <ul class="tips-list">
                        <li>Ask for clarifying details to understand how the candidate's background, trend and current role fits with the current job requirements</li>
                        <li>Asking the "Why?" follow-up question gets at the true source of motivation</li>
                        <li>Determine if person wants any job, or if person is looking for a career move</li>
                        <li>Mention that the purpose of this interview will be to determine if a win-win hiring outcome is possible</li>
                    </ul>
                    <button class="add-evidence-btn" onclick="addSelectedEvidence('General Fit')">+ Add Selected Text as Evidence</button>
                    <p style="margin-top: 10px; font-size: 12px; color: #666; font-style: italic;">
                        üí° Tip: Select any text from the questions, tips, or elsewhere on this page, then click this button to add it to your evidence basket
                    </p>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 1</h4>
                <textarea id="notes-step-1" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('1', 'General Fit')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-1', 'General Fit')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 2 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 2</span>
                <span class="step-title">Measure Impact of First Impression</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Action: Be Aware of Your Biases</h3>
                    <div class="main-question">
                        Write down your immediate emotional reaction to the candidate ‚Äì relaxed, uptight, or neutral. Write down the cause. At the end of the interview you'll measure your first impression of the candidate again, when you're less affected by it.
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Information & Hot Tips</h3>
                    <ul class="tips-list">
                        <li>Wait 30-minutes</li>
                        <li>Do opposite of normal reaction</li>
                        <li>Like: prove incompetency, be tough</li>
                        <li>Dislike: prove competency, be easy</li>
                        <li>Ask same questions to all</li>
                        <li>Be cynical, get proof, examples, facts</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 2</h4>
                <textarea id="notes-step-2" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('2', 'First Impression')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-2', 'First Impression')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 3 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 3</span>
                <span class="step-title">Review Work History and Background</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Work History Questions</h3>
                    <div class="main-question">
                        "Please tell me about your most recent job. What was your position, the company, your duties, and any recognition you received?"
                    </div>
                    <div class="special-note">
                        Spend 20-25 minutes on this as part of a one-hour interview. Go back 5-10 years looking for upward trend of growth.
                    </div>
                    <p><strong>For each job obtain:</strong></p>
                    <ul class="follow-up-questions">
                        <li>Overview, title, type of work</li>
                        <li>Draw org chart & how team was built</li>
                        <li>Dates, why left, explain gaps</li>
                        <li>Highlights, big projects, major focus</li>
                        <li>Recognition, raises, promotion</li>
                    </ul>
                </div>
                <div class="tips-section">
                    <h3>Fact-finding & Hot Tips</h3>
                    <p><strong>Look for an Achiever Pattern:</strong> major accomplishments in each job, upward progression, significant recognition.</p>
                    <ul class="tips-list">
                        <li>For each position obtain: title, promotions, basic duties, 360¬∞ team chart, impact made, challenges faced, any recognition received</li>
                        <li>Ask why the person changed jobs and if the job achieved the reason for changing</li>
                        <li>Avoid Job Hopping Syndrome. If the person is an Achiever (top 25% in peer group), but growth has stalled, or the current job is not highly satisfying, your job might be a good move</li>
                    </ul>
                    <p><strong>Look for stretch gaps such as:</strong></p>
                    <ul class="tips-list">
                        <li>Project size and span of control</li>
                        <li>Influence and exposure</li>
                        <li>Impact and growth</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 3</h4>
                <textarea id="notes-step-3" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('3', 'Work History')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-3', 'Work History')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 4 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 4</span>
                <span class="step-title">Assess a Few Major Accomplishments</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Major Accomplishment Questions</h3>
                    <div class="main-question">
                        "Can you please tell me about your most significant accomplishment at (company)? Or, consider a project or event that you're quite proud of or where you excelled"
                    </div>
                    <div class="main-question">
                        "One major project we're now working on is (describe). Please tell me about something comparable you've led."
                    </div>
                    <div class="special-note">
                        <strong>Modified version for other interviewers:</strong> "I'd like to focus on (attribute). Can you tell me about a major accomplishment that best demonstrates this?"
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Fact-finding & Hot Tips</h3>
                    <p>Spend 12-15 minutes (each) on 2-3 different major accomplishments to develop a trend line over time.</p>
                    <ul class="tips-list">
                        <li>Overview of job, company</li>
                        <li>Team and org structure</li>
                        <li>Environment ‚Äì pace, resources</li>
                        <li>When? How long? Results?</li>
                        <li>What results were expected?</li>
                        <li>How did you plan project?</li>
                        <li>Obtain 2-3 examples of initiative</li>
                        <li>What did you change/improve?</li>
                        <li>Big challenges or conflict faced</li>
                        <li>What did you learn about self?</li>
                        <li>How did you grow as a result?</li>
                        <li>What would you do differently?</li>
                        <li>What (technical) skills needed?</li>
                        <li>How were these enhanced?</li>
                        <li>What (technical) skills learned?</li>
                        <li>Describe likes, dislikes</li>
                        <li>Where did you exceed expectations?</li>
                        <li>How did you improve yourself?</li>
                        <li>What recognition did you receive?</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 4</h4>
                <textarea id="notes-step-4" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('4', 'Accomplishments')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-4', 'Accomplishments')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 4a -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 4a</span>
                <span class="step-title">Assess Major Team Accomplishments</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Team Accomplishment Questions</h3>
                    <div class="main-question">
                        "Can you please tell me about a major team accomplishment? Consider one where you led the team, and one where you were a key member of the team."
                    </div>
                    <div class="special-note">
                        Spend 10-12 minutes on each team accomplishment. Observe trend line and changes in scope of team.
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Fact-finding & Hot Tips</h3>
                    <ul class="tips-list">
                        <li>Draw an org chart w/title</li>
                        <li>What was your role, why you?</li>
                        <li>What was plan & were results met?</li>
                        <li>What were biggest team problems?</li>
                        <li>How did you influence results?</li>
                        <li>3 examples of initiative helping others</li>
                        <li>Examples of being influenced</li>
                        <li>How could you have been better?</li>
                        <li>Describe biggest conflict & resolution</li>
                        <li>Examples coaching others</li>
                        <li>Examples of being coached</li>
                        <li>Did you receive any team recognition?</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 4a</h4>
                <textarea id="notes-step-4a" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('4a', 'Team')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-4a', 'Team')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 5 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 5</span>
                <span class="step-title">Discuss Major Job-related Problems</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Problem-Solving Questions</h3>
                    <div class="main-question">
                        "One major problem we're now facing is ___________. How would you go about addressing this? What would you need to know and how would you plan it out?"
                    </div>
                    <div class="main-question">
                        "What have you done that's most similar?" 
                        <br><small>(This is an anchor to ensure that the candidate doesn't just talk a good game)</small>
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Fact-finding & Hot Tips</h3>
                    <ul class="tips-list">
                        <li>What would you need to know?</li>
                        <li>What would you do first, why?</li>
                        <li>Who else would you involve?</li>
                        <li>How would you prepare?</li>
                        <li>How would you prioritize tasks, why?</li>
                        <li>How would you find critical issues?</li>
                        <li>What resources needed</li>
                        <li>How long would it take, why?</li>
                        <li>What would you do if...?</li>
                        <li>How would you make this trade-off?</li>
                        <li>How would you make business case?</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 5</h4>
                <textarea id="notes-step-5" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('5', 'Problem Solving')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-5', 'Problem Solving')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 6 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 6</span>
                <span class="step-title">Let the Candidate Ask Questions</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Candidate Questions</h3>
                    <div class="main-question">
                        "Based on what we've discussed so far, do you have any questions?"
                    </div>
                    <div class="special-note">
                        It's important to delay candidate questions until the end. Meaningful questions at the end demonstrate that the candidate has processed all they've heard.
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Fact-finding & Hot Tips</h3>
                    <ul class="tips-list">
                        <li>Evaluate if the questions were meaningful, appropriate, and relevant</li>
                        <li>Determine if the candidate is focusing on the long-term career opportunity or just short-term issues</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 6</h4>
                <textarea id="notes-step-6" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('6', 'Questions')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-6', 'Questions')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 7 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 7</span>
                <span class="step-title">Recruit Using the Win-Win Hiring Opportunity</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Recruiting Questions</h3>
                    <div class="main-question">
                        "While I've seen a few other very strong candidates, I'm also impressed with some of the work you've done. Is this role of interest? Why? Why not?"
                    </div>
                    <div class="special-note">
                        <strong>For other interviewers:</strong> "What are your thoughts about the job?"
                    </div>
                    <div class="main-question">
                        "A win-win hiring outcome requires a job to offer a combination of stretch, growth and impact. Let's work on getting you more info around these factors."
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Fact-finding & Hot Tips</h3>
                    <ul class="tips-list">
                        <li>State sincere interest</li>
                        <li>Make candidate earn job</li>
                        <li>Listen 4x more than talk; don't sell</li>
                        <li>Describe concerns to create gap</li>
                        <li>Mention other strong contenders</li>
                        <li>What other jobs are you considering?</li>
                        <li>How interested on 1-10 scale, why?</li>
                        <li>What's needed to know to get to 8-9?</li>
                        <li>Link job to big company projects</li>
                        <li>What do you like/dislike?</li>
                        <li>How does job meet your needs?</li>
                        <li>Compensation needs, availability</li>
                        <li>When can you come back, next steps</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 7</h4>
                <textarea id="notes-step-7" placeholder="Enter your notes for this section..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="add-evidence-btn" onclick="captureStepNotes('7', 'Interest')">
                        üìã Capture All Notes as Evidence
                    </button>
                    <button class="add-evidence-btn" style="background-color: #e67e22;" onclick="enableHighlightMode('notes-step-7', 'Interest')">
                        üñçÔ∏è Highlight Key Phrases
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Step 8 -->
    <div class="step-container">
        <div class="step-header" onclick="toggleSection(this)">
            <div>
                <span class="step-number">Step 8</span>
                <span class="step-title">Measure First Impression Again</span>
            </div>
            <span class="chevron">‚ñº</span>
        </div>
        <div class="step-content">
            <div class="content-grid">
                <div class="questions-section">
                    <h3>Final Assessment</h3>
                    <div class="main-question">
                        Measure first impression again at the end of the interview. Determine how the candidate's first impression will impact on-the-job performance. Consider the actual impact on you, the actual impact on others (customers, peers, superiors, staff).
                    </div>
                    <div class="special-note">
                        Compare the candidate's first impression when measured at the end of the interview to your initial reaction. Keep track of this difference for every interview to reveal your own personal biases.
                    </div>
                </div>
                <div class="tips-section">
                    <h3>Information & Hot Tips</h3>
                    <ul class="tips-list">
                        <li>Did first impression change?</li>
                        <li>Become more/less nervous?</li>
                        <li>Open up more, talk more?</li>
                        <li>Did you observe true personality in accomplishments?</li>
                        <li>Did this change your decision?</li>
                        <li>Is true personality consistent with job needs?</li>
                    </ul>
                </div>
            </div>
            <div class="notes-section">
                <h4>Notes for Step 8</h4>
                <textarea id="notes-step-8" placeholder="Enter your notes for this section..."></textarea>
            </div>
        </div>
    </div>

    <!-- Summary Notes Section -->
    <div class="summary-notes">
        <h2>Interview Notes Summary</h2>
        <div class="summary-content" id="summary-content">
            <p class="empty-notes">Notes will appear here as you complete each section...</p>
        </div>
        <div class="export-buttons">
            <button class="export-button json" onclick="exportToGPT()">
                <span>üì§</span> Export to GPT (JSON)
            </button>
            <button class="export-button pdf" onclick="saveAsPDF()">
                <span>üìÑ</span> Save as PDF
            </button>
        </div>
    </div>

    <!-- Complete Interview Section -->
    <div class="complete-interview-section">
        <h2>Ready to Complete Your Assessment?</h2>
        <p>Once you've finished gathering evidence during the interview, click below to review your evidence and complete the Quality of Hire Talent Scorecard.</p>
        <button class="complete-interview-btn" onclick="completeInterview()">Complete Interview & Proceed to Scorecard</button>
    </div>
    
    <!-- Evidence Summary Modal -->
    <div id="evidenceModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2>Evidence Summary</h2>
            <p>Review the evidence you've collected before proceeding to the scorecard.</p>
            <div class="evidence-summary" id="evidence-summary-content">
                <!-- Evidence will be populated here -->
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="export-button pdf" onclick="proceedToScorecard()">
                    Proceed to Scorecard ‚Üí
                </button>
            </div>
        </div>
    </div>
    
    <!-- Evidence Basket -->
    <div class="evidence-basket" id="evidence-basket">
        <div class="evidence-basket-header">
            <span>Evidence Basket</span>
            <span class="minimize-btn" onclick="toggleBasket()">‚àí</span>
        </div>
        <div class="evidence-basket-content" id="basket-content">
            <p style="color: #999; font-size: 14px;">Select text and click "Add as Evidence" to collect key observations</p>
        </div>
        <div class="basket-count" id="basket-count" style="display: none;">0</div>
    </div>

    <script>
        // Evidence basket data
        let evidenceBasket = [];
        let basketMinimized = false;
        
        // Competency mapping for evidence
        const competencyMap = {
            'General Fit': ['Motivation', 'Culture & Environment'],
            'First Impression': ['Managerial Fit', 'Culture & Environment'],
            'Work History': ['Experience', 'Achiever Pattern & Growth Trend'],
            'Accomplishments': ['Talent & Overall Technical Ability', 'Job Fit with Recent Comparable Results'],
            'Team': ['Team Skills (EQ) & Development, Leadership', 'Management & Organizational Ability'],
            'Problem Solving': ['Thinking & Job-related Problem-solving', 'Management & Organizational Ability'],
            'Questions': ['Motivation', 'Thinking & Job-related Problem-solving'],
            'Interest': ['Motivation', 'Culture & Environment'],
            'Final Assessment': ['Managerial Fit', 'Culture & Environment']
        };
        
        // Set today's date as default
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('interview-date').value = today;
            
            // Open the first section by default
            const firstHeader = document.querySelector('.step-header');
            if (firstHeader) {
                toggleSection(firstHeader);
            }
            
            // Add event listeners to all note textareas
            const noteTextareas = document.querySelectorAll('textarea[id^="notes-"]');
            noteTextareas.forEach(textarea => {
                textarea.addEventListener('input', updateSummary);
            });
            
            // Load saved data if exists
            loadSavedData();
        });
        
        function toggleSection(header) {
            const content = header.nextElementSibling;
            const chevron = header.querySelector('.chevron');
            
            // Toggle the content
            content.classList.toggle('show');
            chevron.classList.toggle('rotate');
            header.classList.toggle('active');
            
            // Close other sections
            const allHeaders = document.querySelectorAll('.step-header');
            allHeaders.forEach(otherHeader => {
                if (otherHeader !== header && otherHeader.classList.contains('active')) {
                    const otherContent = otherHeader.nextElementSibling;
                    const otherChevron = otherHeader.querySelector('.chevron');
                    otherContent.classList.remove('show');
                    otherChevron.classList.remove('rotate');
                    otherHeader.classList.remove('active');
                }
            });
        }
        
        function updateSummary() {
            const summaryContent = document.getElementById('summary-content');
            let hasNotes = false;
            let summaryHTML = '';
            
            // Get all step notes
            for (let i = 1; i <= 8; i++) {
                const stepId = i === 4.5 ? 'notes-step-4a' : `notes-step-${i}`;
                const textarea = document.getElementById(stepId);
                
                if (textarea && textarea.value.trim()) {
                    hasNotes = true;
                    const stepTitle = textarea.closest('.step-container').querySelector('.step-title').textContent;
                    const stepNumber = i === 4.5 ? 'Step 4a' : `Step ${i}`;
                    
                    summaryHTML += `
                        <div class="step-notes-summary">
                            <h4>${stepNumber}: ${stepTitle}</h4>
                            <p>${textarea.value}</p>
                        </div>
                    `;
                }
            }
            
            if (hasNotes) {
                summaryContent.innerHTML = summaryHTML;
            } else {
                summaryContent.innerHTML = '<p class="empty-notes">Notes will appear here as you complete each section...</p>';
            }
            
            // Save data to localStorage
            saveData();
        }
        
        function saveData() {
            const data = {
                candidateName: document.getElementById('candidate-name').value,
                jobPosition: document.getElementById('job-position').value,
                interviewerName: document.getElementById('interviewer-name').value,
                interviewDate: document.getElementById('interview-date').value,
                notes: {}
            };
            
            // Save all notes
            const noteTextareas = document.querySelectorAll('textarea[id^="notes-"]');
            noteTextareas.forEach(textarea => {
                data.notes[textarea.id] = textarea.value;
            });
            
            localStorage.setItem('interviewData', JSON.stringify(data));
        }
        
        function loadSavedData() {
            const savedData = localStorage.getItem('interviewData');
            if (savedData) {
                const data = JSON.parse(savedData);
                
                // Load basic info
                if (data.candidateName) document.getElementById('candidate-name').value = data.candidateName;
                if (data.jobPosition) document.getElementById('job-position').value = data.jobPosition;
                if (data.interviewerName) document.getElementById('interviewer-name').value = data.interviewerName;
                if (data.interviewDate) document.getElementById('interview-date').value = data.interviewDate;
                
                // Load notes
                if (data.notes) {
                    Object.keys(data.notes).forEach(noteId => {
                        const textarea = document.getElementById(noteId);
                        if (textarea) {
                            textarea.value = data.notes[noteId];
                        }
                    });
                }
                
                // Update summary
                updateSummary();
            }
        }
        
        // Save data when info fields change
        document.getElementById('candidate-name').addEventListener('input', saveData);
        document.getElementById('job-position').addEventListener('input', saveData);
        document.getElementById('interviewer-name').addEventListener('input', saveData);
        document.getElementById('interview-date').addEventListener('change', saveData);
        
        function exportToGPT() {
            const data = {
                metadata: {
                    documentType: "Performance-based Interview",
                    version: "1.0",
                    exportDate: new Date().toISOString()
                },
                interviewInfo: {
                    candidateName: document.getElementById('candidate-name').value || 'Not provided',
                    jobPosition: document.getElementById('job-position').value || 'Not provided',
                    interviewerName: document.getElementById('interviewer-name').value || 'Not provided',
                    interviewDate: document.getElementById('interview-date').value || new Date().toISOString().split('T')[0]
                },
                interviewNotes: {},
                summary: {
                    totalStepsCompleted: 0,
                    stepsWithNotes: []
                }
            };
            
            // Collect all notes organized by step
            const steps = [
                { id: 'notes-step-1', name: 'Welcome and Review Job/Motivation' },
                { id: 'notes-step-2', name: 'Measure Impact of First Impression' },
                { id: 'notes-step-3', name: 'Review Work History and Background' },
                { id: 'notes-step-4', name: 'Assess a Few Major Accomplishments' },
                { id: 'notes-step-4a', name: 'Assess Major Team Accomplishments' },
                { id: 'notes-step-5', name: 'Discuss Major Job-related Problems' },
                { id: 'notes-step-6', name: 'Let the Candidate Ask Questions' },
                { id: 'notes-step-7', name: 'Recruit Using the Win-Win Hiring Opportunity' },
                { id: 'notes-step-8', name: 'Measure First Impression Again' }
            ];
            
            steps.forEach((step, index) => {
                const textarea = document.getElementById(step.id);
                if (textarea && textarea.value.trim()) {
                    const stepNumber = step.id === 'notes-step-4a' ? 'Step 4a' : `Step ${step.id.split('-')[2]}`;
                    data.interviewNotes[stepNumber] = {
                        stepName: step.name,
                        notes: textarea.value.trim(),
                        order: index + 1
                    };
                    data.summary.totalStepsCompleted++;
                    data.summary.stepsWithNotes.push(stepNumber);
                }
            });
            
            // Create and download JSON file
            const jsonString = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const fileName = `Interview_GPT_${data.interviewInfo.candidateName.replace(/\s+/g, '_')}_${data.interviewInfo.interviewDate}.json`;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
        
        // Evidence Collection Functions
        function addSelectedEvidence(category) {
            const selection = window.getSelection();
            const selectedText = selection.toString().trim();
            
            if (selectedText) {
                const evidence = {
                    id: Date.now(),
                    text: selectedText,
                    category: category,
                    competencies: competencyMap[category] || [],
                    timestamp: new Date().toISOString(),
                    type: 'selected',
                    source: 'Selected from guide'
                };
                
                evidenceBasket.push(evidence);
                updateBasketDisplay();
                selection.removeAllRanges();
                
                // Show success feedback
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úì Added!';
                btn.style.backgroundColor = '#27ae60';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.backgroundColor = '#3498db';
                }, 1500);
            } else {
                alert('Please select some text first');
            }
        }
        
        // Capture all notes from a step
        function captureStepNotes(stepId, category) {
            const textareaId = stepId === '4a' ? 'notes-step-4a' : `notes-step-${stepId}`;
            const textarea = document.getElementById(textareaId);
            
            if (textarea && textarea.value.trim()) {
                const evidence = {
                    id: Date.now(),
                    text: textarea.value,
                    category: category,
                    competencies: competencyMap[category] || [],
                    timestamp: new Date().toISOString(),
                    type: 'full-notes',
                    source: `Step ${stepId} - ${category}`,
                    stepId: stepId
                };
                
                evidenceBasket.push(evidence);
                updateBasketDisplay();
                
                // Show success feedback
                alert(`All notes from Step ${stepId} have been added to the evidence basket!`);
                updateStepEvidenceCount(stepId);
            } else {
                alert('No notes to capture in this step');
            }
        }
        
        // Enable highlight mode for selecting specific phrases
        let highlightModeActive = false;
        let currentHighlightTextarea = null;
        let currentHighlightCategory = null;
        
        function enableHighlightMode(textareaId, category) {
            const textarea = document.getElementById(textareaId);
            
            if (highlightModeActive && currentHighlightTextarea === textareaId) {
                // Disable highlight mode
                highlightModeActive = false;
                textarea.classList.remove('highlight-mode-active');
                textarea.removeEventListener('mouseup', handleTextHighlight);
                hideHighlightInstructions();
            } else {
                // Enable highlight mode
                highlightModeActive = true;
                currentHighlightTextarea = textareaId;
                currentHighlightCategory = category;
                
                // Remove previous highlight mode if active
                document.querySelectorAll('.highlight-mode-active').forEach(ta => {
                    ta.classList.remove('highlight-mode-active');
                });
                
                textarea.classList.add('highlight-mode-active');
                showHighlightInstructions(textarea);
                
                // Add event listener for text selection
                textarea.addEventListener('mouseup', handleTextHighlight);
            }
        }
        
        function handleTextHighlight(event) {
            const textarea = event.target;
            const selectedText = textarea.value.substring(textarea.selectionStart, textarea.selectionEnd).trim();
            
            if (selectedText) {
                const evidence = {
                    id: Date.now(),
                    text: selectedText,
                    category: currentHighlightCategory,
                    competencies: competencyMap[currentHighlightCategory] || [],
                    timestamp: new Date().toISOString(),
                    type: 'highlight',
                    source: `Highlighted from ${currentHighlightCategory} notes`
                };
                
                evidenceBasket.push(evidence);
                updateBasketDisplay();
                
                // Show quick feedback
                showAutoSuggest(event.pageX, event.pageY, 'Added to evidence basket!');
                
                // Update count
                const stepId = currentHighlightTextarea.split('-').pop();
                updateStepEvidenceCount(stepId);
            }
        }
        
        function showHighlightInstructions(textarea) {
            let instructions = textarea.parentElement.querySelector('.highlight-instructions');
            if (!instructions) {
                instructions = document.createElement('div');
                instructions.className = 'highlight-instructions';
                instructions.textContent = 'üñçÔ∏è Highlight mode active: Select text in the box below to add as evidence. Click the highlight button again to exit.';
                textarea.parentElement.insertBefore(instructions, textarea);
            }
            instructions.style.display = 'block';
        }
        
        function hideHighlightInstructions() {
            document.querySelectorAll('.highlight-instructions').forEach(inst => {
                inst.style.display = 'none';
            });
        }
        
        function showAutoSuggest(x, y, message) {
            const suggest = document.createElement('div');
            suggest.className = 'auto-suggest';
            suggest.textContent = message;
            suggest.style.left = x + 'px';
            suggest.style.top = (y - 30) + 'px';
            document.body.appendChild(suggest);
            
            setTimeout(() => {
                suggest.remove();
            }, 2000);
        }
        
        function updateStepEvidenceCount(stepId) {
            // Count evidence from this step
            const stepEvidence = evidenceBasket.filter(e => 
                e.stepId === stepId || e.source.includes(`Step ${stepId}`)
            );
            
            // Update visual indicator if needed
            // This could be implemented to show counts next to step headers
        }
        
        // Enhanced updateBasketDisplay function
        function updateBasketDisplay() {
            const basketContent = document.getElementById('basket-content');
            const basketCount = document.getElementById('basket-count');
            
            if (evidenceBasket.length === 0) {
                basketContent.innerHTML = '<p style="color: #999; font-size: 14px;">Select text and click "Add as Evidence" to collect key observations</p>';
                basketCount.style.display = 'none';
            } else {
                let html = '';
                evidenceBasket.forEach(item => {
                    const typeBadge = item.type === 'full-notes' ? 'evidence-type-full' : 
                                     item.type === 'highlight' ? 'evidence-type-highlight' : 
                                     'evidence-type-selected';
                    const typeLabel = item.type === 'full-notes' ? 'Full Notes' : 
                                     item.type === 'highlight' ? 'Highlighted' : 
                                     'Selected';
                    
                    html += `
                        <div class="evidence-item">
                            <div>
                                ${item.competencies.map(c => `<span class="evidence-tag">${c}</span>`).join('')}
                                <span class="evidence-type-badge ${typeBadge}">${typeLabel}</span>
                            </div>
                            <div class="evidence-text">${item.text.substring(0, 100)}${item.text.length > 100 ? '...' : ''}</div>
                            <div class="evidence-source">${item.source}</div>
                            <span class="remove-evidence" onclick="removeEvidence(${item.id})">√ó</span>
                        </div>
                    `;
                });
                basketContent.innerHTML = html;
                basketCount.textContent = evidenceBasket.length;
                basketCount.style.display = 'block';
            }
            
            // Save to localStorage
            saveEvidenceBasket();
        }
        
        // Auto-suggest evidence based on keywords
        const evidenceKeywords = {
            'achieved': ['Achiever Pattern & Growth Trend', 'Talent & Overall Technical Ability'],
            'led': ['Team Skills (EQ) & Development, Leadership', 'Management & Organizational Ability'],
            'managed': ['Management & Organizational Ability', 'Team Skills (EQ) & Development, Leadership'],
            'solved': ['Thinking & Job-related Problem-solving'],
            'improved': ['Achiever Pattern & Growth Trend', 'Talent & Overall Technical Ability'],
            'developed': ['Talent & Overall Technical Ability', 'Thinking & Job-related Problem-solving'],
            'collaborated': ['Team Skills (EQ) & Development, Leadership'],
            'challenge': ['Thinking & Job-related Problem-solving'],
            'result': ['Job Fit with Recent Comparable Results'],
            'culture': ['Culture & Environment'],
            'motivation': ['Motivation'],
            'excited': ['Motivation'],
            'passionate': ['Motivation']
        };
        
        // Monitor text input for keywords
        function setupAutoSuggest() {
            document.querySelectorAll('textarea[id^="notes-"]').forEach(textarea => {
                textarea.addEventListener('input', function(e) {
                    const text = e.target.value.toLowerCase();
                    const lastWord = text.split(' ').pop();
                    
                    // Check for keywords
                    Object.keys(evidenceKeywords).forEach(keyword => {
                        if (lastWord.includes(keyword) && text.length > 20) {
                            // Could show a suggestion tooltip here
                            // For now, we'll just track it
                        }
                    });
                });
            });
        }
        
        function removeEvidence(id) {
            evidenceBasket = evidenceBasket.filter(item => item.id !== id);
            updateBasketDisplay();
        }
        
        function toggleBasket() {
            const basket = document.getElementById('evidence-basket');
            basketMinimized = !basketMinimized;
            
            if (basketMinimized) {
                basket.classList.add('minimized');
                basket.innerHTML = `
                    <div class="basket-icon" onclick="toggleBasket()">üìã</div>
                    <div class="basket-count" id="basket-count" ${evidenceBasket.length > 0 ? '' : 'style="display: none;"'}>${evidenceBasket.length}</div>
                `;
            } else {
                basket.classList.remove('minimized');
                rebuildBasket();
            }
        }
        
        function rebuildBasket() {
            const basket = document.getElementById('evidence-basket');
            basket.innerHTML = `
                <div class="evidence-basket-header">
                    <span>Evidence Basket</span>
                    <span class="minimize-btn" onclick="toggleBasket()">‚àí</span>
                </div>
                <div class="evidence-basket-content" id="basket-content">
                    <p style="color: #999; font-size: 14px;">Select text and click "Add as Evidence" to collect key observations</p>
                </div>
                <div class="basket-count" id="basket-count" style="display: none;">0</div>
            `;
            updateBasketDisplay();
        }
        
        function saveEvidenceBasket() {
            const allData = JSON.parse(localStorage.getItem('interviewData') || '{}');
            allData.evidenceBasket = evidenceBasket;
            localStorage.setItem('interviewData', JSON.stringify(allData));
        }
        
        function loadEvidenceBasket() {
            const savedData = localStorage.getItem('interviewData');
            if (savedData) {
                const data = JSON.parse(savedData);
                if (data.evidenceBasket) {
                    evidenceBasket = data.evidenceBasket;
                    updateBasketDisplay();
                }
            }
        }
        
        function completeInterview() {
            // Update phase indicator
            document.getElementById('phase-1').classList.remove('active');
            document.getElementById('phase-1').classList.add('completed');
            document.getElementById('phase-2').classList.add('active');
            
            // Show evidence summary modal
            showEvidenceSummary();
        }
        
        function showEvidenceSummary() {
            const modal = document.getElementById('evidenceModal');
            const summaryContent = document.getElementById('evidence-summary-content');
            
            // Group evidence by competency
            const evidenceByCompetency = {};
            evidenceBasket.forEach(item => {
                item.competencies.forEach(comp => {
                    if (!evidenceByCompetency[comp]) {
                        evidenceByCompetency[comp] = [];
                    }
                    evidenceByCompetency[comp].push(item);
                });
            });
            
            // Build summary HTML
            let html = '';
            if (Object.keys(evidenceByCompetency).length === 0) {
                html = '<p style="color: #999;">No evidence collected yet. You can still proceed to the scorecard.</p>';
            } else {
                Object.keys(evidenceByCompetency).sort().forEach(comp => {
                    html += `
                        <div class="evidence-category">
                            <h4>${comp}</h4>
                            ${evidenceByCompetency[comp].map(item => `
                                <div style="margin-bottom: 10px; padding: 10px; background-color: white; border-radius: 5px;">
                                    <small style="color: #999;">From ${item.category}:</small>
                                    <p style="margin: 5px 0;">${item.text}</p>
                                </div>
                            `).join('')}
                        </div>
                    `;
                });
            }
            
            summaryContent.innerHTML = html;
            modal.style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('evidenceModal').style.display = 'none';
        }
        
        function proceedToScorecard() {
            // Save all current data including evidence
            saveData();
            
            // Update phase indicator
            document.getElementById('phase-2').classList.remove('active');
            document.getElementById('phase-2').classList.add('completed');
            document.getElementById('phase-3').classList.add('active');
            
            // Prepare data for scorecard
            const interviewData = {
                candidateName: document.getElementById('candidate-name').value,
                jobPosition: document.getElementById('job-position').value,
                interviewerName: document.getElementById('interviewer-name').value,
                interviewDate: document.getElementById('interview-date').value,
                evidenceBasket: evidenceBasket,
                notes: {}
            };
            
            // Collect all notes
            const noteTextareas = document.querySelectorAll('textarea[id^="notes-"]');
            noteTextareas.forEach(textarea => {
                interviewData.notes[textarea.id] = textarea.value;
            });
            
            // Store in localStorage for scorecard to access
            localStorage.setItem('interviewDataForScorecard', JSON.stringify(interviewData));
            
            // Redirect to scorecard with parameters
            const scorecardUrl = `https://louadler.github.io/jobs/interactive-qoh-scorecard-b2.html?candidate=${encodeURIComponent(interviewData.candidateName)}&position=${encodeURIComponent(interviewData.jobPosition)}&interviewer=${encodeURIComponent(interviewData.interviewerName)}&date=${encodeURIComponent(interviewData.interviewDate)}&fromInterview=true`;
            
            window.open(scorecardUrl, '_blank');
            closeModal();
        }
        
        // Add evidence buttons to all tips sections
        document.addEventListener('DOMContentLoaded', function() {
            // Load evidence basket
            loadEvidenceBasket();
            
            // Add evidence buttons and setup auto-suggest
            setupAutoSuggest();
            
            // Update all notes sections with capture buttons
            const noteSections = [
                { id: 'notes-step-2', stepId: '2', category: 'First Impression' },
                { id: 'notes-step-3', stepId: '3', category: 'Work History' },
                { id: 'notes-step-4', stepId: '4', category: 'Accomplishments' },
                { id: 'notes-step-4a', stepId: '4a', category: 'Team' },
                { id: 'notes-step-5', stepId: '5', category: 'Problem Solving' },
                { id: 'notes-step-6', stepId: '6', category: 'Questions' },
                { id: 'notes-step-7', stepId: '7', category: 'Interest' },
                { id: 'notes-step-8', stepId: '8', category: 'Final Assessment' }
            ];
            
            noteSections.forEach(section => {
                const textarea = document.getElementById(section.id);
                if (textarea && !textarea.parentElement.querySelector('.add-evidence-btn')) {
                    const buttonContainer = document.createElement('div');
                    buttonContainer.style.cssText = 'display: flex; gap: 10px; margin-top: 10px;';
                    
                    const captureBtn = document.createElement('button');
                    captureBtn.className = 'add-evidence-btn';
                    captureBtn.innerHTML = 'üìã Capture All Notes as Evidence';
                    captureBtn.onclick = () => captureStepNotes(section.stepId, section.category);
                    
                    const highlightBtn = document.createElement('button');
                    highlightBtn.className = 'add-evidence-btn';
                    highlightBtn.style.backgroundColor = '#e67e22';
                    highlightBtn.innerHTML = 'üñçÔ∏è Highlight Key Phrases';
                    highlightBtn.onclick = () => enableHighlightMode(section.id, section.category);
                    
                    buttonContainer.appendChild(captureBtn);
                    buttonContainer.appendChild(highlightBtn);
                    textarea.parentElement.appendChild(buttonContainer);
                }
            });
        });
        
        // Handle window clicks for modal
        window.onclick = function(event) {
            const modal = document.getElementById('evidenceModal');
            if (event.target == modal) {
                closeModal();
            }
        }
        
        function saveAsPDF() {
            // Create a printable version of the content
            const candidateName = document.getElementById('candidate-name').value || 'Unknown Candidate';
            const jobPosition = document.getElementById('job-position').value || 'Unknown Position';
            const interviewerName = document.getElementById('interviewer-name').value || 'Unknown Interviewer';
            const interviewDate = document.getElementById('interview-date').value || new Date().toISOString().split('T')[0];
            
            // Create a new window for printing
            const printWindow = window.open('', '_blank');
            
            // Build the HTML content for PDF
            let htmlContent = `
            <!DOCTYPE html>
            <html>
            <head>
                <title>Interview Summary - ${candidateName}</title>
                <style>
                    @media print {
                        body { margin: 20px; }
                        .no-print { display: none; }
                    }
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        color: #333;
                        max-width: 800px;
                        margin: 0 auto;
                        padding: 20px;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 2px solid #3498db;
                        padding-bottom: 20px;
                        margin-bottom: 30px;
                    }
                    .header h1 {
                        color: #2c3e50;
                        margin: 0 0 10px 0;
                    }
                    .info-section {
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-radius: 5px;
                        margin-bottom: 20px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 10px;
                    }
                    .info-item {
                        margin: 5px 0;
                    }
                    .info-label {
                        font-weight: bold;
                        color: #555;
                    }
                    .step-section {
                        margin-bottom: 25px;
                        page-break-inside: avoid;
                    }
                    .step-header {
                        background-color: #3498db;
                        color: white;
                        padding: 10px 15px;
                        border-radius: 5px;
                        margin-bottom: 10px;
                    }
                    .step-notes {
                        padding: 15px;
                        background-color: #f8f9fa;
                        border-left: 4px solid #3498db;
                        white-space: pre-wrap;
                    }
                    .empty-step {
                        color: #999;
                        font-style: italic;
                    }
                    .footer {
                        text-align: center;
                        margin-top: 40px;
                        padding-top: 20px;
                        border-top: 1px solid #ddd;
                        color: #666;
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Performance-based Interview Summary</h1>
                    <p>¬©2025 The Adler Group, Inc.</p>
                </div>
                
                <div class="info-section">
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Candidate:</span> ${candidateName}
                        </div>
                        <div class="info-item">
                            <span class="info-label">Position:</span> ${jobPosition}
                        </div>
                        <div class="info-item">
                            <span class="info-label">Interviewer:</span> ${interviewerName}
                        </div>
                        <div class="info-item">
                            <span class="info-label">Date:</span> ${interviewDate}
                        </div>
                    </div>
                </div>
                
                <h2>Interview Notes by Step</h2>
            `;
            
            // Add all step notes
            const steps = [
                { id: 'notes-step-1', number: 'Step 1', name: 'Welcome and Review Job/Motivation' },
                { id: 'notes-step-2', number: 'Step 2', name: 'Measure Impact of First Impression' },
                { id: 'notes-step-3', number: 'Step 3', name: 'Review Work History and Background' },
                { id: 'notes-step-4', number: 'Step 4', name: 'Assess a Few Major Accomplishments' },
                { id: 'notes-step-4a', number: 'Step 4a', name: 'Assess Major Team Accomplishments' },
                { id: 'notes-step-5', number: 'Step 5', name: 'Discuss Major Job-related Problems' },
                { id: 'notes-step-6', number: 'Step 6', name: 'Let the Candidate Ask Questions' },
                { id: 'notes-step-7', number: 'Step 7', name: 'Recruit Using the Win-Win Hiring Opportunity' },
                { id: 'notes-step-8', number: 'Step 8', name: 'Measure First Impression Again' }
            ];
            
            steps.forEach(step => {
                const textarea = document.getElementById(step.id);
                const notes = textarea ? textarea.value.trim() : '';
                
                htmlContent += `
                <div class="step-section">
                    <div class="step-header">
                        <strong>${step.number}:</strong> ${step.name}
                    </div>
                    <div class="step-notes">
                        ${notes || '<span class="empty-step">No notes recorded for this step</span>'}
                    </div>
                </div>
                `;
            });
            
            htmlContent += `
                <div class="footer">
                    <p>Generated on ${new Date().toLocaleString()}</p>
                </div>
            </body>
            </html>
            `;
            
            // Write the content and trigger print
            printWindow.document.write(htmlContent);
            printWindow.document.close();
            
            // Wait for content to load then trigger print dialog
            printWindow.onload = function() {
                printWindow.print();
                // Optional: close the window after printing
                printWindow.onafterprint = function() {
                    printWindow.close();
                };
            };
        }
        
        function exportNotes() {
            const candidateName = document.getElementById('candidate-name').value || 'Unknown Candidate';
            const jobPosition = document.getElementById('job-position').value || 'Unknown Position';
            const interviewerName = document.getElementById('interviewer-name').value || 'Unknown Interviewer';
            const interviewDate = document.getElementById('interview-date').value || new Date().toISOString().split('T')[0];
            
            let exportText = `PERFORMANCE-BASED INTERVIEW SUMMARY\n`;
            exportText += `===================================\n\n`;
            exportText += `Candidate: ${candidateName}\n`;
            exportText += `Position: ${jobPosition}\n`;
            exportText += `Interviewer: ${interviewerName}\n`;
            exportText += `Date: ${interviewDate}\n\n`;
            exportText += `===================================\n\n`;
            
            // Add all notes
            for (let i = 1; i <= 8; i++) {
                const stepId = i === 4.5 ? 'notes-step-4a' : `notes-step-${i}`;
                const textarea = document.getElementById(stepId);
                
                if (textarea && textarea.value.trim()) {
                    const stepTitle = textarea.closest('.step-container').querySelector('.step-title').textContent;
                    const stepNumber = i === 4.5 ? 'Step 4a' : `Step ${i}`;
                    
                    exportText += `${stepNumber}: ${stepTitle}\n`;
                    exportText += `${'-'.repeat(50)}\n`;
                    exportText += `${textarea.value}\n\n`;
                }
            }
            
            // Create and download file
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Interview_${candidateName.replace(/\s+/g, '_')}_${interviewDate}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>